// RUN: %b3 resolve --rprint "%s" > "%t"
// RUN: %diff "%s.expect" "%t"

function P(a: int, b: int): bool

procedure TestAutoInvParameters(
  x: int autoinv P(x, y),
  inout y: int autoinv P(old y, y) && P(y, x),
  out z: int autoinv P(z, y) && P(z, old y) && P(z, x))
{
  y := y + 1
  z := 300

  check old y == y - 1
}

procedure TestAutoInvLocals()
{
  var m: int autoinv P(m, 82)
  val n: int autoinv P(n, m)
  var o autoinv P(o, 83) := 100
  val p autoinv P(p, m) := 102
  var q: int autoinv P(q, 84) := 104
  val r: int autoinv P(r, m) := 106

  var s: int autoinv false := 108
}
